<config>
    <allowed_languages default="de_DE en_GB en_US es_ES fr_FR it nl pt_BR pt_PT ru">{{ .Env.COLLABORA_ALLOWED_LANGUAGES }}</allowed_languages>

    <tile_cache_persistent type="bool" default="true">{{ .Env.COLLABORA_TILE_CACHE_PERSISTENT }}</tile_cache_persistent>
    <tile_cache_path type="path" relative="false" default="/var/cache/loolwsd">{{ .Env.COLLABORA_TILE_CACHE_PATH }}</tile_cache_path>
    <sys_template_path type="path" relative="true" default="systemplate">{{ .Env.COLLABORA_SYS_TEMPLATE_PATH }}</sys_template_path>
    <lo_template_path type="path" relative="false" default="/opt/collaboraoffice6.0">{{ .Env.COLLABORA_LO_TEMPLATE_PATH }}</lo_template_path>
    <child_root_path type="path" relative="true" default="jails">{{ .Env.COLLABORA_CHILD_ROOT_PATH }}</child_root_path>

    <server_name type="string" default="">{{ .Env.COLLABORA_SERVER_NAME }}</server_name>
    <file_server_root_path type="path" relative="true" default="loleaflet/../">{{ .Env.COLLABORA_FILE_SERVER_ROOT_PATH }}</file_server_root_path>

    <memproportion type="double" default="80.0">{{ .Env.COLLABORA_MEMPROPORTION }}</memproportion>
    <num_prespawn_children type="uint" default="1">{{ .Env.COLLABORA_NUM_RESPAWN_CHILDREN }}</num_prespawn_children>

    <loleaflet_html type="string" default="loleaflet.html">{{ .Env.COLLABORA_LOLEAFLET_HTML }}</loleaflet_html>
    <loleaflet_logging default="false">{{ .Env.COLLABORA_LOLEAFLET_LOGGING }}</loleaflet_logging>

    <per_document>
        <max_concurrency type="uint" default="4">{{ .Env.COLLABORA_PER_DOCUMENT_MAX_CONCURRENCY }}</max_concurrency>
        <document_signing_url type="string" default="">{{ .Env.COLLABORA_PER_DOCUMENT_DOCUMENT_SIGNING_URL }}</document_signing_url>
        <redlining_as_comments type="bool" default="true">{{ .Env.COLLABORA_PER_DOCUMENT_REDLINING_AS_COMMENT }}</redlining_as_comments>
        <idle_timeout_secs type="uint" default="3600">{{ .Env.COLLABORA_PER_DOCUMENT_IDLE_TIMEOUT }}</idle_timeout_secs>
        <idlesave_duration_secs type="uint" default="30">{{ .Env.COLLABORA_PER_DOCUMENT_IDLESAVE_DURATION }}</idlesave_duration_secs>
        <autosave_duration_secs type="uint" default="300">{{ .Env.COLLABORA_PER_DOCUMENT_AUTOSAVE_DURATION }}</autosave_duration_secs>
        <limit_virt_mem_kb type="uint">{{ .Env.COLLABORA_PER_DOCUMENT_LIMIT_VIRT_MEM }}</limit_virt_mem_kb>
        <limit_data_mem_kb type="uint">{{ .Env.COLLABORA_PER_DOCUMENT_LIMIT_DATA_MEM }}</limit_data_mem_kb>
        <limit_stack_mem_kb type="uint">{{ .Env.COLLABORA_PER_DOCUMENT_LIMIT_STACK_MEM }}</limit_stack_mem_kb>
        <limit_file_size_mb type="uint">{{ .Env.COLLABORA_PER_DOCUMENT_LIMIT_FILE_SIZE }}</limit_file_size_mb>
        <limit_num_open_files type="uint">{{ .Env.COLLABORA_PER_DOCUMENT_LIMIT_NUM_OPEN_FILES }}</limit_num_open_files>
        <limit_load_secs type="uint" default="100">{{ .Env.COLLABORA_PER_DOCUMENT_LIMIT_LOAD }}</limit_load_secs>
    </per_document>

    <per_view>
        <out_of_focus_timeout_secs type="uint" default="60">{{ .Env.COLLABORA_PER_VIEW_OUT_OF_FOCUS_TIMEOUT }}</out_of_focus_timeout_secs>
        <idle_timeout_secs type="uint" default="900">{{ .Env.COLLABORA_PER_VIEW_IDLE_TIMEOUT }}</idle_timeout_secs>
    </per_view>

    <logging>
        <color type="bool">{{ .Env.COLLABORA_LOGGING_COLOR }}</color>
        <level type="string" default="warning">{{ .Env.COLLABORA_LOGGING_LEVEL }}</level>
        <file enable="{{ .Env.COLLABORA_LOGGING_FILE_ENABLE }}">
            <property name="path">{{ .Env.COLLABORA_LOGGING_FILE_PATH }}</property>
            <property name="rotation">{{ .Env.COLLABORA_LOGGING_FILE_ROTATION }}</property>
            <property name="archive">{{ .Env.COLLABORA_LOGGING_FILE_ARCHIVE }}</property>
            <property name="compress">{{ .Env.COLLABORA_LOGGING_FILE_COMPRESS }}</property>
            <property name="purgeAge">{{ .Env.COLLABORA_LOGGING_FILE_PURGE_AGE }}</property>
            <property name="purgeCount">{{ .Env.COLLABORA_LOGGING_FILE_PURGE_COUNT }}</property>
            <property name="rotateOnOpen">{{ .Env.COLLABORA_LOGGING_FILE_ROTATE_ON_OPEN }}</property>
            <property name="flush">{{ .Env.COLLABORA_LOGGING_FILE_FLUSH }}</property>
        </file>
        <anonymize>
            <filenames type="bool" default="false">{{ .Env.COLLABORA_LOGGING_ANONYMIZE_FILENAMES }}</filenames>
            <usernames type="bool" default="false">{{ .Env.COLLABORA_LOGGING_ANONYMIZE_USERNAMES }}</usernames>
        </anonymize>
    </logging>

    <trace enable="{{ .Env.COLLABORA_TRACE_ENABLE }}">
        <path compress="{{ .Env.COLLABORA_TRACE_COMPRESS }}" snapshot="{{ .Env.COLLABORA_TRACE_SNAPSHOW }}">{{ .Env.COLLABORA_TRACE_PATH }}</path>
        <filter>
{{ range split .Env.COLLABORA_TRACE_FILTER " " }}
            <message>{{ . }}</message>
{{ end }}
        </filter>
        <outgoing>
            <record default="false">{{ .Env.COLLABORA_TRACE_OUTGOING_RECORD }}</record>
        </outgoing>
    </trace>

    <net>
      <proto type="string" default="all">{{ .Env.COLLABORA_NET_PROTO }}</proto>
      <listen type="string" default="any">{{ .Env.COLLABORA_NET_LISTEN }}</listen>
      <service_root type="path" default="">{{ .Env.COLLABORA_NET_SERVICE_ROOT }}</service_root>
      <frame_ancestors>{{ .Env.COLLABORA_NET_FRAME_ANCESTORS }}</frame_ancestors>
      <post_allow allow="{{ .Env.COLLABORA_NET_POST_ALLOW }}">
{{ range split .Env.COLLABORA_NET_POST_ALLOW_HOSTS " " }}
            <host>{{ . }}</host>
{{ end }}
      </post_allow>
    </net>

    <ssl>
        <enable type="bool" default="true">{{ .Env.COLLABORA_SSL_ENABLE }}</enable>
        <termination type="bool" default="true">{{ .Env.COLLABORA_SSL_TERMINATION }}</termination>
        <cert_file_path relative="false">{{ .Env.COLLABORA_SSL_CERT_FILE }}</cert_file_path>
        <key_file_path relative="false">{{ .Env.COLLABORA_SSL_KEY_FILE }}</key_file_path>
        <ca_file_path relative="false">{{ .Env.COLLABORA_SSL_CA_FILE }}</ca_file_path>
        <cipher_list default="ALL:!ADH:!LOW:!EXP:!MD5:@STRENGTH">{{ .Env.COLLABORA_SSL_CIPHER_LIST }}</cipher_list>
        <hpkp enable="{{ .Env.COLLABORA_SSL_HPKP_ENABLE }}" report_only="{{ .Env.COLLABORA_SSL_HPKP_REPORT_ONLY }}">
            <max_age enable="{{ .Env.COLLABORA_SSL_HPKP_MAX_AGE_ENABLE }}">{{ .Env.COLLABORA_SSL_HPKP_MAX_AGE }}</max_age>
            <report_uri enable="{{ .Env.COLLABORA_SSL_HPKP_REPORT_URI_ENABLE }}">{{ .Env.COLLABORA_SSL_HPKP_REPORT_URI }}</report_uri>
            <pins>
{{ range split .Env.COLLABORA_SSL_HPKP_PINS " " }}
                <pin>{{ . }}</pin>
{{ end }}
            </pins>
        </hpkp>
    </ssl>

    <security>
      <seccomp type="bool" default="true">{{ .Env.COLLABORA_SECURITY_SECCOMP }}</seccomp>
      <capabilities type="bool" default="true">{{ .Env.COLLABORA_SECURITY_CAPABILITIES }}</capabilities>
    </security>

    <storage>
        <filesystem allow="{{ .Env.COLLABORA_STORAGE_FILESYSTEM_ALLOW }}" />
        <wopi allow="{{ .Env.COLLABORA_STORAGE_WOPI_ALLOW }}">
            <max_file_size type="uint">{{ .Env.COLLABORA_STORAGE_WOPI_MAX_FILE_SIZE }}</max_file_size>
{{ range split .Env.COLLABORA_STORAGE_WOPI_HOSTS_REJECT " " }}
            <host allow="false">{{ . }}</host>
{{ end }}
{{ range split .Env.COLLABORA_STORAGE_WOPI_HOSTS_ALLOW " " }}
            <host allow="true">{{ . }}</host>
{{ end }}
        </wopi>
        <webdav allow="{{ .Env.COLLABORA_STORAGE_WEBDAV_ALLOW }}">
{{ range split .Env.COLLABORA_STORAGE_WEBDAV_HOSTS_REJECT " " }}
            <host allow="false">{{ . }}</host>
{{ end }}
{{ range split .Env.COLLABORA_STORAGE_WEBDAV_HOSTS_ALLOW " " }}
            <host allow="true">{{ . }}</host>
{{ end }}
        </webdav>
    </storage>

    <admin_console>
        <enable type="bool" default="true">{{ .Env.COLLABORA_ADMIN_CONSOLE_ENABLE }}</enable>
        <enable_pam type="bool" default="false">{{ .Env.COLLABORA_ADMIN_CONSOLE_ENABLE_PAM }}</enable_pam>
        <username>{{ .Env.COLLABORA_ADMIN_CONSOLE_USERNAME }}</username>
        <password>{{ .Env.COLLABORA_ADMIN_CONSOLE_PASSWORD }}</password>
    </admin_console>

    <monitors>
    </monitors>
</config>
